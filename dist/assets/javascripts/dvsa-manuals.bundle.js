/*!
 * 
 *   Name: dvsa-front-end/dvsa-manuals
 *   Version: 1.2.18
 *   Author: Tameem Safi <https://github.com/tameemsafi>
 *   Contributors: Tameem Safi <https://github.com/tameemsafi>, James Nelson <j.nelson@kainos.com>
 *   Timestamp: July 3rd 2018, 2:43:11 pm
 *   Source: https://github.com/dvsa/front-end
 * 
 */
webpackJsonp([3],{177:function(t,e){function n(t){var e=typeof t;return null!=t&&("object"==e||"function"==e)}t.exports=n},294:function(t,e,n){"use strict";n(46),n(49),n(50),n(52),n(53),n(54),n(55),n(56),n(57),n(58),n(59),n(60),n(63),n(64),n(66),n(67),n(68),n(69),n(70),n(71),n(72),n(73),n(74),n(75),n(76),n(77),n(78),n(79),n(80),n(82),n(83),n(84),n(85),n(86),n(87),n(88),n(89),n(90),n(91),n(92),n(93),n(94),n(95),n(96),n(97),n(98),n(99),n(100),n(101),n(102),n(103),n(104),n(105),n(107),n(108),n(109),n(110),n(111),n(112),n(113),n(114),n(115),n(36),n(116),n(117),n(118),n(119),n(120),n(121),n(122),n(123),n(124),n(125),n(126),n(127),n(128),n(129),n(130),n(131),n(132),n(133),n(134),n(135),n(136),n(137),n(138),n(139),n(140),n(141),n(142),n(143),n(144),n(145),n(146),n(147),n(148),n(149),n(150);var a=n(2),i=n(295);(0,a.domReady)(function(){(0,a.initGDS)(),(0,i.initModules)()})},295:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.initModules=void 0;var a=n(296),i=n(302);e.initModules=function(){(0,a.initManualSmartSurvey)(),(0,i.initDvsaManualMeta)()}},296:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.initManualSmartSurvey=void 0;var a=n(297);e.initManualSmartSurvey=function(){new a.ManualSmartSurvey}},297:function(t,e,n){"use strict";function a(t){return t&&t.__esModule?t:{default:t}}function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(e,"__esModule",{value:!0}),e.ManualSmartSurvey=void 0;var r=n(2),s=n(298),o=a(s),u=n(45),l=a(u);e.ManualSmartSurvey=function t(){var e=this;i(this,t),this.init=function(){e.setupAllIframes(),(0,r.addEventListenerToEl)(window,"resize",(0,o.default)(e.updateAllIframes,50)),(0,r.addEventListenerToEl)(window,"scroll",(0,o.default)(e.updateAllIframes,50)),(0,r.addEventListenerToEl)(window,"message",e.onPostMessageReceived)},this.setupAllIframes=function(){e.elements.smartSurveyElements.forEach(function(t){var n=t.getAttribute(e.attributes.heading).trim();n=n.replace(/\n/g,""),e.state.smartsurveys.push({attached:!1,smartSurveyElement:t,src:t.getAttribute(e.attributes.iframeSrc),headingHash:(0,l.default)(n)})}),e.updateAllIframes()},this.updateAllIframes=function(){e.state.smartsurveys&&e.state.smartsurveys.forEach(function(t,n){t.attached||(0,r.isElementInViewport)(t.smartSurveyElement,200)&&(t.smartSurveyElement.innerHTML=e.generateIframeCode(t.src),e.state.smartsurveys[n].attached=!0)})},this.onPostMessageReceived=function(t){if(t&&t.data){var n=JSON.parse(t.data);if(n.event_id&&n.value&&n.event_id===e.events.smartSurveyRadioClicked&&"No"===n.value){var a=(0,l.default)(n.heading),i=!1;if(e.state.smartsurveys.forEach(function(t){t.headingHash===a&&(i=t)}),!i)return;(0,r.toggleClass)(i.smartSurveyElement,e.classnames.manualSmartSurvey.iframeFeedbackOpen,!0)}}},this.generateIframeCode=function(t){return'\n      <iframe\n        src="'+t+'"\n        frameborder="0"\n        class="'+e.classnames.manualSmartSurvey.iframe+'"\n      ></iframe>\n    '},this.classnames={manualSmartSurvey:{base:"manual-smart-survey",iframe:"manual-smart-survey__iframe",iframeFeedbackOpen:"manual-smart-survey--feedback-open"}},this.attributes={heading:"data-heading",iframeSrc:"data-iframe-src",iframeAttached:"data-iframe-attached"},this.elements={smartSurveyElements:Array.from(document.querySelectorAll("."+this.classnames.manualSmartSurvey.base))},this.events={smartSurveyRadioClicked:"smartsurvey_radio_clicked"},this.state={smartsurveys:[]},this.elements.smartSurveyElements&&0!=this.elements.smartSurveyElements.length&&this.init()}},298:function(t,e,n){function a(t,e,n){var a=!0,o=!0;if("function"!=typeof t)throw new TypeError(s);return r(n)&&(a="leading"in n?!!n.leading:a,o="trailing"in n?!!n.trailing:o),i(t,e,{leading:a,maxWait:e,trailing:o})}var i=n(299),r=n(177),s="Expected a function";t.exports=a},299:function(t,e,n){function a(t,e,n){function a(e){var n=S,a=g;return S=g=void 0,w=e,E=t.apply(a,n)}function c(t){return w=t,M=setTimeout(m,e),T?a(t):E}function d(t){var n=t-k,a=t-w,i=e-n;return A?l(i,b-a):i}function f(t){var n=t-k,a=t-w;return void 0===k||n>=e||n<0||A&&a>=b}function m(){var t=r();if(f(t))return v(t);M=setTimeout(m,d(t))}function v(t){return M=void 0,O&&S?a(t):(S=g=void 0,E)}function h(){void 0!==M&&clearTimeout(M),w=0,S=k=g=M=void 0}function p(){return void 0===M?E:v(r())}function y(){var t=r(),n=f(t);if(S=arguments,g=this,k=t,n){if(void 0===M)return c(k);if(A)return M=setTimeout(m,e),a(k)}return void 0===M&&(M=setTimeout(m,e)),E}var S,g,b,E,M,k,w=0,T=!1,A=!1,O=!0;if("function"!=typeof t)throw new TypeError(o);return e=s(e)||0,i(n)&&(T=!!n.leading,A="maxWait"in n,b=A?u(s(n.maxWait)||0,e):b,O="trailing"in n?!!n.trailing:O),y.cancel=h,y.flush=p,y}var i=n(177),r=n(300),s=n(301),o="Expected a function",u=Math.max,l=Math.min;t.exports=a},300:function(t,e,n){var a=n(205),i=function(){return a.Date.now()};t.exports=i},301:function(t,e,n){function a(t){if("number"==typeof t)return t;if(r(t))return s;if(i(t)){var e="function"==typeof t.valueOf?t.valueOf():t;t=i(e)?e+"":e}if("string"!=typeof t)return 0===t?t:+t;t=t.replace(o,"");var n=l.test(t);return n||c.test(t)?d(t.slice(2),n?2:8):u.test(t)?s:+t}var i=n(177),r=n(206),s=NaN,o=/^\s+|\s+$/g,u=/^[-+]0x[0-9a-f]+$/i,l=/^0b[01]+$/i,c=/^0o[0-7]+$/i,d=parseInt;t.exports=a},302:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.initDvsaManualMeta=void 0;var a=n(303);e.initDvsaManualMeta=function(){new a.DvsaManualMeta}},303:function(t,e,n){"use strict";function a(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(e,"__esModule",{value:!0}),e.DvsaManualMeta=void 0;var i=n(2);e.DvsaManualMeta=function t(){var e=this;a(this,t),this.init=function(){e.setupStateFromDOM(),e.updateDOMBasedOnState(),(0,i.delegateEvent)(document,"click","."+e.classnames.linkShowHide,e.onShowHideLinkClick),(0,i.delegateEvent)(document,"click","."+e.classnames.linkTop,e.onTopLinkClick)},this.setupStateFromDOM=function(){e.elements.showHideLinks.forEach(function(t){var n=t.getAttribute(e.attributes.target);if(n){var a=t.getAttribute(e.attributes.openText),i=t.getAttribute(e.attributes.hiddenText);t.setAttribute(e.attributes.aria.controls,n),e.state.historySections.push({targetId:n,showHideLinkElement:t,historyElement:document.querySelector("#"+n),open:!1,openText:a,hiddenText:i})}})},this.onShowHideLinkClick=function(t){t.preventDefault();var n=t.target.getAttribute(e.attributes.target);n&&e.updateOpenStateOfHistorySection(n,!1,function(t){e.updateDOMBasedOnState()})},this.onTopLinkClick=function(t){t.preventDefault();var n=t.target.getAttribute(e.attributes.target);n&&e.updateOpenStateOfHistorySection(n,!0,function(t){e.updateDOMBasedOnState(function(){t.historyElement.scrollIntoView(!0)})})},this.updateOpenStateOfHistorySection=function(t){var n=arguments.length>1&&void 0!==arguments[1]&&arguments[1],a=arguments[2];t&&e.state.historySections.forEach(function(i,r){i.targetId===t&&(e.state.historySections[r].open=!!n||!e.state.historySections[r].open,"function"==typeof a&&a(i))})},this.updateDOMBasedOnState=function(t){e.state.historySections.forEach(function(t){t.showHideLinkElement&&t.historyElement&&(t.showHideLinkElement.innerHTML=t.open?t.openText:t.hiddenText,(0,i.toggleClass)(t.historyElement,e.classnames.openHistory,t.open),t.showHideLinkElement.setAttribute(e.attributes.aria.expanded,t.open),t.open?t.historyElement.removeAttribute(e.attributes.aria.hidden):t.historyElement.setAttribute(e.attributes.aria.hidden,"true"))}),"function"==typeof t&&t()},this.classnames={openHistory:"dvsa-manual-meta__history--open",linkShowHide:"dvsa-manual-meta__link--show-hide",linkTop:"dvsa-manual-meta__link--top-link"},this.elements={links:Array.from(document.querySelectorAll(".dvsa-manual-meta__link")),showHideLinks:Array.from(document.querySelectorAll("."+this.classnames.linkShowHide)),openLinks:Array.from(document.querySelectorAll("."+this.classnames.linkTop))},this.attributes={target:"data-target",openText:"data-open-text",hiddenText:"data-hidden-text",aria:{controls:"aria-controls",expanded:"aria-expanded",hidden:"aria-hidden"}},this.state={historySections:[]},this.elements.links&&this.elements.showHideLinks&&this.elements.openLinks&&this.init()}}},[294]);